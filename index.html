<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Grupo A Cobijo</title>
<meta name="description" content="App de experiencia del cliente: eventos, horarios y accesos rÃ¡pidos a los alojamientos del Grupo A Cobijo.">
<link rel="manifest" href="manifest.webmanifest">
<meta name="theme-color" content="#0ea5e9">
<link rel="icon" href="assets/logo_acobijo_white.png">

<style>
:root {
  --bg:#ffffff;
  --card:#f4f9ff;
  --accent:#0077cc;
  --muted:#6b7a8c;
  --text:#0a1a2a;
  --line:#dce7f5;
  --tint:#eaf4ff;
  --accent-ink:#064e89;
}

*{box-sizing:border-box}
body{
  margin:0;
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
  background:#ffffff;
  color:var(--text);
}
.wrap{max-width:900px;margin:0 auto;padding:20px}
header{display:flex;align-items:center;gap:12px;margin:8px 0 20px;flex-wrap:wrap}
.logo{width:52px;height:52px;border-radius:12px;overflow:hidden;cursor:pointer}
.logo img{width:100%;height:100%;object-fit:contain;}
h1{font-size:1.6rem;margin:0}
.tag{font-size:.9rem;color:var(--muted)}
.pill{padding:4px 12px;border-radius:20px;font-size:.85rem;border:1px solid var(--line);background:var(--tint)}
section-title{font-size:1.35rem;font-weight:700;margin-top:28px;display:block}

.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(270px,1fr));gap:14px;margin-top:12px}
.card{
  background:var(--card);
  border-radius:16px;
  padding:16px;
  border:1px solid var(--line);
}
.btn{
  padding:10px 14px;border-radius:12px;border:1px solid var(--line);
  text-decoration:none;display:inline-block;background:var(--tint);
  font-weight:600;margin-right:6px;margin-bottom:6px;color:var(--accent-ink)
}
.btn:hover{background:rgba(0,119,204,.12)}

.event-card{
  padding:14px;border-radius:14px;background:var(--card);
  border:1px solid var(--line);margin-bottom:10px;
}
.event-title{font-weight:700;font-size:1.1rem;margin-bottom:4px}
.event-date{font-size:.9rem;color:var(--muted)}
.event-desc{font-size:.9rem;margin-top:6px;margin-bottom:4px}

/*** PANEL ADMIN ***/
#adminPanel{
  display:none;
  position:fixed;top:0;left:0;width:100%;height:100%;
  background:rgba(0,0,0,.55);backdrop-filter:blur(4px);
}
#adminBox{
  max-width:500px;margin:60px auto;background:white;
  padding:20px;border-radius:16px;
}
input, textarea, select{
  width:100%;padding:10px;margin:6px 0 14px;border-radius:10px;border:1px solid var(--line)
}
textarea{height:80px}
.admin-btn {width:100%;padding:12px;background:var(--accent);color:white;border-radius:12px;margin-top:6px;text-align:center;font-weight:600;border:none}
</style>
</head>

<body>
<div class="wrap">

<header>
  <div class="logo" id="adminTrigger">
    <img src="assets/logo_acobijo_white.png">
  </div>
  <div>
    <h1>Grupo A Cobijo</h1>
    <div class="tag">Experiencia del cliente</div>
  </div>
  <span class="pill" id="langLabel">ES</span>
  <span class="pill">PWA â€¢ Offline</span>
</header>

<section-title>Eventos Grupo A Cobijo</section-title>
<div id="eventsList"></div>

<section-title>Horarios</section-title>
<a class="btn" href="#">Ver horarios</a>

<section-title>Campings</section-title>
<div class="grid">

  <div class="card">
    <h3>Camping Caravaning Playa de Oyambre</h3>
    <a class="btn" href="https://www.oyambre.com" target="_blank">Web</a>
    <a class="btn" href="tel:+34942711461">Llamar</a>
    <a class="btn" href="https://maps.google.com/?q=Camping+Caravaning+Playa+de+Oyambre" target="_blank">CÃ³mo llegar</a>
    <a class="btn" href="https://wa.me/34675696212" target="_blank">WhatsApp</a>
  </div>

  <div class="card">
    <h3>Camping Ramales</h3>
    <a class="btn" href="https://www.campingramales.com" target="_blank">Web</a>
    <a class="btn" href="tel:+34654463133">Llamar</a>
    <a class="btn" href="https://maps.google.com/?q=Camping+Ramales" target="_blank">CÃ³mo llegar</a>
    <a class="btn" href="https://wa.me/34654463133" target="_blank">WhatsApp</a>
  </div>

  <div class="card">
    <h3>Camping El Helguero (Ruiloba)</h3>
    <a class="btn" href="https://www.campingelhelguero.com" target="_blank">Web</a>
    <a class="btn" href="tel:+34942722124">Llamar</a>
    <a class="btn" href="https://maps.google.com/?q=Camping+El+Helguero" target="_blank">CÃ³mo llegar</a>
    <a class="btn" href="https://wa.me/34652806564" target="_blank">WhatsApp</a>
  </div>

</div>

<section-title>Otros alojamientos del grupo</section-title>
<div class="grid">
  <div class="card">
    <h3>Apartamentos / Taberna El Cardeo</h3>
    <a class="btn" href="https://www.elcardeo.es" target="_blank">Web</a>
    <a class="btn" href="tel:+34664686158">Llamar</a>
    <a class="btn" href="https://maps.app.goo.gl/XCzaYGDDLk2CQ8VK6" target="_blank">CÃ³mo llegar</a>
    <a class="btn" href="https://wa.me/34664686158" target="_blank">WhatsApp</a>
  </div>
</div>

</div>

<!-- PANEL ADMIN -->
<div id="adminPanel">
  <div id="adminBox">

    <h2>Panel eventos</h2>

    <select id="camping">
      <option value="oyambre">Oyambre</option>
      <option value="ramales">Ramales</option>
      <option value="ruiloba">Ruiloba</option>
      <option value="cardeo">El Cardeo</option>
    </select>

    <input id="fecha" type="datetime-local">
    <input id="tituloES" placeholder="TÃ­tulo (ES)">
    <textarea id="descES" placeholder="DescripciÃ³n (ES)"></textarea>

    <button class="admin-btn" id="saveEvent">âœ… Guardar evento</button>

    <hr>
    <h3>Config GitHub</h3>
    <input id="repo" placeholder="usuario/repositorio">
    <input id="branch" value="main">
    <input id="token" placeholder="TOKEN GitHub (PAT)">
    <button class="admin-btn" id="pushGitHub">ðŸ’¾ Guardar en GitHub</button>

  </div>
</div>

<script>
const LANG = navigator.language.slice(0,2);
document.getElementById("langLabel").textContent = LANG.toUpperCase();

let ADMIN_EVENTS = [];
let adminClicks = 0;

document.getElementById("adminTrigger").addEventListener("click", ()=>{
  adminClicks++;
  if(adminClicks >= 5){
    document.getElementById("adminPanel").style.display="block";
  }
});

// cargar eventos desde events.json
fetch("events.json")
.then(r=>r.json())
.then(data=>{
  ADMIN_EVENTS = data;
  renderEvents();
});

// pintar eventos
function renderEvents(){
  const el = document.getElementById("eventsList");
  el.innerHTML = "";

  ADMIN_EVENTS.sort((a,b)=> new Date(a.fecha) - new Date(b.fecha));

  ADMIN_EVENTS.forEach(ev=>{
    const titulo = ev.titulo?.[LANG] || ev.titulo?.es || "";
    const descripcion = ev.descripcion?.[LANG] || ev.descripcion?.es || "";
    const lugar = ev.lugar?.[LANG] || ev.lugar?.es || "";

    el.innerHTML += `
      <div class="event-card">
        <div class="event-title">${titulo}</div>
        <div class="event-date">${new Date(ev.fecha).toLocaleString()}</div>
        <div class="event-desc">${descripcion}</div>
        <small>${lugar}</small>
      </div>
    `;
  });
}

// guardar evento en memoria
document.getElementById("saveEvent").onclick = ()=>{
  ADMIN_EVENTS.push({
    id: Date.now(),
    fecha: document.getElementById("fecha").value,
    camping: document.getElementById("camping").value,
    titulo:{ es: document.getElementById("tituloES").value },
    descripcion:{ es: document.getElementById("descES").value },
    lugar:{ es: document.getElementById("camping").value }
  });
  renderEvents();
};

// guardar JSON en GitHub vÃ­a API
document.getElementById("pushGitHub").onclick = async ()=>{
  const repo = document.getElementById("repo").value;
  const branch = document.getElementById("branch").value;
  const token = document.getElementById("token").value;

  const getFile = await fetch(`https://api.github.com/repos/${repo}/contents/events.json?ref=${branch}`,{
    headers:{Authorization:`Bearer ${token}`}
  }).then(r=>r.json());

  await fetch(getFile.url,{
    method:"PUT",
    headers:{Authorization:`Bearer ${token}`},
    body:JSON.stringify({
      message:"update events.json",
      content: btoa(unescape(encodeURIComponent(JSON.stringify(ADMIN_EVENTS,null,2)))),
      sha: getFile.sha
    })
  });

  alert("âœ… Subido a GitHub");
};
</script>
</body>
</html>
