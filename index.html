<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Grupo A Cobijo</title>

  <meta name="description" content="App ligera del Grupo A Cobijo con accesos rápidos a los campings, teléfono, WhatsApp, mapas y eventos.">

  <!-- PWA -->
  <link rel="manifest" href="manifest.webmanifest">
  <meta name="theme-color" content="#0ea5e9">
  <link rel="icon" href="assets/icons/icon-192.png">

  <!-- ✅ Splash + modo App en iOS -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <link rel="apple-touch-icon" href="assets/icons/icon-192.png">

  <!-- ✅ Splash iPhone (portrait) -->
  <link rel="apple-touch-startup-image" href="assets/splash/iphone-15pm-portrait.png" media="(device-width: 430px) and (device-height: 932px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)">
  <link rel="apple-touch-startup-image" href="assets/splash/iphone-15p-portrait.png"  media="(device-width: 393px) and (device-height: 852px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)">
  <link rel="apple-touch-startup-image" href="assets/splash/iphone-14-15-plus-portrait.png" media="(device-width: 428px) and (device-height: 926px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)">
  <link rel="apple-touch-startup-image" href="assets/splash/iphone-12pm-portrait.png" media="(device-width: 428px) and (device-height: 926px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)">
  <link rel="apple-touch-startup-image" href="assets/splash/iphone-12-14-portrait.png" media="(device-width: 390px) and (device-height: 844px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)">
  <link rel="apple-touch-startup-image" href="assets/splash/iphone-x-11pro-portrait.png" media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)">
  <link rel="apple-touch-startup-image" href="assets/splash/iphone-11r-portrait.png" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">
  <link rel="apple-touch-startup-image" href="assets/splash/iphone-6-8-se2-portrait.png" media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">
  <link rel="apple-touch-startup-image" href="assets/splash/iphone-5-se1-portrait.png" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">

  <!-- ✅ iPad -->
  <link rel="apple-touch-startup-image" href="assets/splash/ipad-pro-12-9-portrait.png" media="(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">
  <link rel="apple-touch-startup-image" href="assets/splash/ipad-pro-11-portrait.png"    media="(device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">
  <link rel="apple-touch-startup-image" href="assets/splash/ipad-pro-10-5-portrait.png"  media="(device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">
  <link rel="apple-touch-startup-image" href="assets/splash/ipad-9-7-portrait.png"       media="(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">
  <link rel="apple-touch-startup-image" href="assets/splash/ipad-10-9-portrait.png"      media="(device-width: 820px) and (device-height: 1180px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">

  <style>
    :root{
      --bg:#ffffff;
      --card:#f4f9ff;
      --accent:#0077cc;
      --muted:#6b7a8c;
      --text:#0a1a2a;
      --line:#dce7f5;
      --tint:#eaf4ff;
      --accent-ink:#064e89;
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui;background:#fff;color:var(--text)}
    .wrap{max-width:900px;margin:0 auto;padding:24px}

    /* ✅ Logo */
    header{display:flex;align-items:center;gap:16px;margin:8px 0 20px;flex-wrap:wrap}
    .logo-img{height:80px;width:auto;object-fit:contain}

    h1{margin:0;font-size:1.4rem}
    .tag{color:var(--muted);font-size:.85rem}
    .spacer{flex:1}

    .lang{appearance:none;border:1px solid var(--line);padding:6px 10px;border-radius:10px;font-weight:600;color:var(--accent-ink)}
    .pill{border:1px solid var(--line);background:var(--tint);padding:4px 10px;border-radius:999px;font-size:.8rem}

    .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:16px;margin:16px 0 28px}
    .card{background:var(--card);border:1px solid var(--line);border-radius:16px;padding:16px;box-shadow:0 6px 18px rgba(0,0,0,.06);display:flex;flex-direction:column;gap:12px}
    .btn{border:1px solid var(--line);background:rgba(0,119,204,.08);padding:10px 12px;border-radius:12px;text-decoration:none;color:var(--accent-ink);font-weight:600}
    .btn:hover{background:rgba(0,119,204,.14)}

    /* map */
    .map{width:100%;aspect-ratio:16/10;border-radius:12px;overflow:hidden;border:1px solid var(--line)}

    footer{margin-top:8px;font-size:.9rem;opacity:.85}
    .ok{color:#21a653}
    .install{display:none}

    /* eventos */
    .event-card{background:#fff;border:1px solid var(--line);border-radius:14px;padding:12px;display:flex;flex-direction:column;gap:6px}
    .event-title{font-weight:700}
    .event-meta{font-size:.9rem;color:var(--muted)}
  </style>
</head>

<body>
  <div class="wrap">

    <!-- ✅ HEADER -->
    <header>
      <img src="assets/logo.png" class="logo-img" alt="Grupo A Cobijo">

      <div>
        <h1 id="t-app">Grupo A Cobijo</h1>
        <div class="tag" id="t-subtitle">Caravaning Oyambre · Camping Ramales · Camping Ruiloba</div>
      </div>

      <div class="spacer"></div>

      <select id="langSel" class="lang">
        <option value="es">ES</option>
        <option value="en">EN</option>
        <option value="fr">FR</option>
        <option value="de">DE</option>
        <option value="nl">NL</option>
      </select>

      <span class="pill" id="t-pwa">PWA • Offline</span>
    </header>

    <!-- ✅ CAMPINGS -->
    <section class="grid">

      <article class="card">
        <h2 id="t-oy-title">Camping Caravaning Playa de Oyambre</h2>
        <p class="hint" id="t-oy-hint">Todos los servicios · Frente al mar</p>
        <div class="row">
          <a class="btn" href="https://www.oyambre.com" target="_blank">Web</a>
          <a class="btn" href="tel:+34942711461">Llamar</a>
          <a class="btn" href="https://maps.google.com/?q=Camping+Caravaning+Playa+de+Oyambre" target="_blank">Cómo llegar</a>
          <a class="btn" href="https://wa.me/34675696212" target="_blank">WhatsApp</a>
        </div>
        <div class="map"><iframe src="https://www.google.com/maps?q=Camping+Caravaning+Playa+de+Oyambre&output=embed"></iframe></div>
      </article>

      <article class="card">
        <h2 id="t-ra-title">Camping Ramales</h2>
        <p class="hint" id="t-ra-hint">Cuevas · Montaña · Actividades</p>
        <div class="row">
          <a class="btn" href="https://www.campingramales.com" target="_blank">Web</a>
          <a class="btn" href="tel:+34654463133">Llamar</a>
          <a class="btn" href="https://maps.google.com/?q=Camping+Ramales" target="_blank">Cómo llegar</a>
          <a class="btn" href="https://wa.me/34654463133" target="_blank">WhatsApp</a>
        </div>
        <div class="map"><iframe src="https://www.google.com/maps?q=Camping+Ramales&output=embed"></iframe></div>
      </article>

      <article class="card">
        <h2 id="t-he-title">Camping El Helguero (Ruiloba)</h2>
        <p class="hint" id="t-he-hint">Naturaleza · Familiar · Mascotas</p>
        <div class="row">
          <a class="btn" href="https://www.campingelhelguero.com" target="_blank">Web</a>
          <a class="btn" href="tel:+34942722124">Llamar</a>
          <a class="btn" href="https://maps.google.com/?q=Camping+El+Helguero" target="_blank">Cómo llegar</a>
          <a class="btn" href="https://wa.me/34652806564" target="_blank">WhatsApp</a>
        </div>
        <div class="map"><iframe src="https://www.google.com/maps?q=Camping+El+Helguero&output=embed"></iframe></div>
      </article>

    </section>

    <!-- ✅ EVENTOS -->
    <section>
      <h2>Eventos Grupo A Cobijo</h2>
      <div id="events" class="grid"></div>
    </section>

    <!-- ✅ INSTALACIÓN PWA -->
    <section class="card">
      <h2 id="t-install-title">Instálame como app</h2>
      <p class="hint" id="t-install-hint">Android: ⋮ → Instalar App. iOS: Compartir → Añadir a pantalla inicio.</p>
      <button id="installBtn" class="btn install">Instalar ahora</button>
      <p id="pwaStatus" class="hint"></p>
    </section>

    <!-- ✅ FOOTER -->
    <footer>
      © <span id="year"></span> Grupo A Cobijo · <span id="t-offline">Funciona sin conexión</span> <span class="ok">●</span>
    </footer>
  </div>

<script>
  document.getElementById('year').textContent = new Date().getFullYear();

  // Service worker (offline + autoupdate)
  if ("serviceWorker" in navigator) navigator.serviceWorker.register("./service-worker.js");

  // Eventos
  async function loadEvents(){
    try{
      const res = await fetch('./events.json', { cache: 'no-cache' });
      const data = await res.json();
      const wrap = document.getElementById('events');
      wrap.innerHTML = data.map(ev => `
        <div class="event-card">
          <div class="event-title">${ev.titulo}</div>
          <div class="event-meta">${ev.fecha} · ${ev.lugar}</div>
          <div class="hint">${ev.descripcion}</div>
        </div>
      `).join('');
    }catch(e){}
  }
  loadEvents();

  // Instalación PWA
  let deferredPrompt;
  const installBtn = document.getElementById("installBtn");

  window.addEventListener("beforeinstallprompt", e => {
    e.preventDefault();
    deferredPrompt = e;
    installBtn.style.display = "inline-flex";
  });

  installBtn.addEventListener("click", () => {
    deferredPrompt.prompt();
    deferredPrompt = null;
  });
</script>

</body>
</html>
