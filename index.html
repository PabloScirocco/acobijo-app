<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Grupo A Cobijo</title>
  <meta name="description" content="App ligera del Grupo A Cobijo con accesos rápidos a los campings, teléfono, WhatsApp, mapas y eventos.">
  <link rel="manifest" href="manifest.webmanifest">
  <link rel="apple-touch-icon" href="assets/icons/icon-192.png">
  <meta name="theme-color" content="#0ea5e9">
  <link rel="icon" href="assets/icons/icon-192.png">

  <style>
    :root{
      --bg:#ffffff;
      --card:#f4f9ff;
      --accent:#0077cc;
      --muted:#6b7a8c;
      --text:#0a1a2a;
      --line:#dce7f5;
      --tint:#eaf4ff;
      --accent-ink:#064e89;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Arial,sans-serif;
      background:#ffffff;color:var(--text);
    }

    .wrap{max-width:900px;margin:0 auto;padding:24px}

    /* ✅ LOGO GRANDE */
    header{display:flex;align-items:center;gap:16px;margin:8px 0 20px;flex-wrap:wrap}
    .logo-img{
      height:80px;   /* <-- tamaño grande */
      width:auto;
      object-fit:contain;
      display:block;
    }

    h1{font-size:1.4rem;margin:0}
    .tag{font-size:.85rem;color:var(--muted)}
    .spacer{flex:1}
    .pill{display:inline-block;border:1px solid var(--line);background:var(--tint);border-radius:999px;padding:4px 10px;font-size:.8rem;color:var(--accent-ink)}

    .lang{appearance:none;border:1px solid var(--line);background:#fff;border-radius:10px;padding:6px 10px;font-weight:600;color:var(--accent-ink)}

    .grid{display:grid;grid-template-columns:repeat( auto-fit, minmax(240px,1fr) );gap:16px;margin:16px 0 28px}

    .card{
      background:var(--card);border:1px solid var(--line);
      border-radius:16px;padding:16px;
      box-shadow:0 6px 18px rgba(0,0,0,.06);
      display:flex;flex-direction:column;gap:12px;
    }

    .card h2{font-size:1.1rem;margin:0 0 4px}
    .row{display:flex;gap:8px;flex-wrap:wrap}

    .btn{
      appearance:none;
      border:1px solid var(--line);
      background:rgba(0,119,204,.08);
      color:var(--accent-ink);
      padding:10px 12px;
      border-radius:12px;
      text-decoration:none;
      display:inline-flex;
      align-items:center;
      gap:8px;
      font-weight:600;
    }
    .btn:hover{background:rgba(0,119,204,.14)}

    .hint{font-size:.9rem;color:var(--muted)}
    footer{opacity:.85;font-size:.9rem;margin-top:8px}
    .install{display:none;margin:8px 0 0}
    .ok{color:#21a653}

    /* Mapas */
    .map{width:100%; aspect-ratio: 16/10; border-radius:12px; overflow:hidden; border:1px solid var(--line); background:#fff}
    .map iframe{width:100%; height:100%; border:0}

    /* Eventos */
    .events{margin-top:8px}
    .events h2{margin:0 0 8px;font-size:1.15rem}
    .events-grid{display:grid;grid-template-columns:repeat( auto-fit, minmax(240px,1fr) );gap:12px}
    .event-card{background:#fff;border:1px solid var(--line);border-radius:14px;padding:12px;display:flex;flex-direction:column;gap:6px}
    .event-title{font-weight:700}
    .event-meta{font-size:.9rem;color:var(--muted)}

  </style>
</head>
<body>
  <div class="wrap">

    <!-- ✅ LOGO NUEVO EN CABECERA -->
    <header>
      <img src="assets/logo.png" alt="Grupo A Cobijo" class="logo-img">

      <div>
        <h1 id="t-app">Grupo A Cobijo</h1>
        <div class="tag" id="t-subtitle">Caravaning Oyambre · Camping Ramales · Camping Ruiloba</div>
      </div>

      <div class="spacer"></div>

      <select id="langSel" class="lang">
        <option value="es">ES</option>
        <option value="en">EN</option>
        <option value="fr">FR</option>
        <option value="de">DE</option>
        <option value="nl">NL</option>
      </select>

      <span class="pill" id="t-pwa">PWA • Offline</span>
    </header>


    <!-- ✅ CAMPINGS -->
    <section class="grid">

      <article class="card">
        <h2 id="t-oy-title">Camping Caravaning Playa de Oyambre</h2>
        <p class="hint" id="t-oy-hint">Todos los servicios · Frente al mar</p>
        <div class="row">
          <a class="btn" id="t-web" href="https://www.oyambre.com" target="_blank">Web</a>
          <a class="btn" id="t-call" href="tel:+34942711461">Llamar</a>
          <a class="btn" id="t-directions" href="https://maps.google.com/?q=Camping+Caravaning+Playa+de+Oyambre" target="_blank">Cómo llegar</a>
          <a class="btn" id="t-whatsapp" href="https://wa.me/34675696212?text=Hola,%20quiero%20info%20sobre%20Oyambre" target="_blank">WhatsApp</a>
        </div>
        <div class="map">
          <iframe src="https://www.google.com/maps?q=Camping+Caravaning+Playa+de+Oyambre&output=embed"></iframe>
        </div>
      </article>


      <article class="card">
        <h2 id="t-ra-title">Camping Ramales</h2>
        <p class="hint" id="t-ra-hint">Cuevas · Montaña · Actividades</p>
        <div class="row">
          <a class="btn" id="t-web2" href="https://www.campingramales.com" target="_blank">Web</a>
          <a class="btn" id="t-call2" href="tel:+34654463133">Llamar</a>
          <a class="btn" id="t-directions2" href="https://maps.google.com/?q=Camping+Ramales" target="_blank">Cómo llegar</a>
          <a class="btn" id="t-whatsapp2" href="https://wa.me/34654463133?text=Hola,%20quiero%20info%20sobre%20Ramales" target="_blank">WhatsApp</a>
        </div>
        <div class="map">
          <iframe src="https://www.google.com/maps?q=Camping+Ramales&output=embed"></iframe>
        </div>
      </article>


      <article class="card">
        <h2 id="t-he-title">Camping El Helguero (Ruiloba)</h2>
        <p class="hint" id="t-he-hint">Naturaleza · Familiar · Mascotas</p>
        <div class="row">
          <a class="btn" id="t-web3" href="https://www.campingelhelguero.com" target="_blank">Web</a>
          <a class="btn" id="t-call3" href="tel:+34942722124">Llamar</a>
          <a class="btn" id="t-directions3" href="https://maps.google.com/?q=Camping+El+Helguero" target="_blank">Cómo llegar</a>
          <a class="btn" id="t-whatsapp3" href="https://wa.me/34652806564?text=Hola,%20quiero%20info%20sobre%20Ruiloba" target="_blank">WhatsApp</a>
        </div>
        <div class="map">
          <iframe src="https://www.google.com/maps?q=Camping+El+Helguero&output=embed"></iframe>
        </div>
      </article>

    </section>


    <!-- ✅ EVENTOS -->
    <section class="events">
      <h2 id="t-events-title">Eventos Grupo A Cobijo</h2>
      <div id="events" class="events-grid"></div>
    </section>


    <!-- ✅ INSTALAR APP -->
    <section class="card">
      <h2 id="t-install-title">Instálame como app</h2>
      <p class="hint" id="t-install-hint">En Android: ⋮ → Instalar App. En iOS: Compartir → Añadir a pantalla de inicio.</p>
      <button id="installBtn" class="btn install">Instalar ahora</button>
      <p id="pwaStatus" class="hint"></p>
    </section>


    <footer>
      © <span id="year"></span> Grupo A Cobijo • <span id="t-offline">Funciona sin conexión</span> <span class="ok">●</span>
    </footer>
  </div>


<script>
  // Actualiza año
  document.getElementById('year').textContent = new Date().getFullYear();

  // Carga de eventos desde events.json
  loadEvents();
  async function loadEvents(){
    try{
      const res = await fetch('./events.json', { cache: 'no-cache' });
      const data = await res.json();
      const wrap = document.getElementById('events');
      wrap.innerHTML = "";
      data.forEach(ev=>{
        wrap.innerHTML += `
          <div class="event-card">
            <div class="event-title">${ev.titulo}</div>
            <div class="event-meta">${ev.fecha} · ${ev.lugar}</div>
            <div class="hint">${ev.descripcion}</div>
          </div>
        `;
      });
    }catch(e){
      console.warn("Sin eventos todavía");
    }
  }

  // Service Worker (offline + autoupdate)
  if ("serviceWorker" in navigator) navigator.serviceWorker.register("./service-worker.js");

  // Botón instalar PWA
  let deferredPrompt;
  const installBtn = document.getElementById("installBtn");
  window.addEventListener("beforeinstallprompt", (e)=>{
    e.preventDefault();
    deferredPrompt = e;
    installBtn.style.display = "inline-flex";
  });
  installBtn.addEventListener("click", async ()=>{
    deferredPrompt.prompt();
    deferredPrompt = null;
  });

</script>

</body>
</html>
